{% load static %}
<div class="activities">
  <div class="activities__header">
    <svg xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         version="1.1"
         width="256"
         height="256"
         viewBox="0 0 256 256"
         xml:space="preserve">
      <defs>
      </defs>
      <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
      <path d="M 5.923 20.49 c -0.109 0 -0.215 -0.021 -0.316 -0.063 c -0.204 -0.085 -0.363 -0.243 -0.447 -0.447 c -0.049 -0.117 -0.142 -0.142 -0.212 -0.142 s -0.164 0.025 -0.212 0.142 c -0.174 0.42 -0.659 0.621 -1.079 0.447 l -0.895 -0.371 c -0.421 -0.175 -0.621 -0.659 -0.447 -1.079 c 0.051 -0.124 -0.009 -0.21 -0.049 -0.25 c -0.05 -0.051 -0.134 -0.1 -0.251 -0.051 C 1.592 18.85 1.108 18.65 0.934 18.23 l -0.371 -0.895 c -0.084 -0.204 -0.084 -0.428 0 -0.632 c 0.085 -0.204 0.243 -0.363 0.447 -0.447 c 0.117 -0.049 0.142 -0.142 0.142 -0.212 c 0 -0.058 -0.018 -0.161 -0.142 -0.212 c -0.204 -0.084 -0.363 -0.243 -0.447 -0.447 c -0.084 -0.203 -0.084 -0.428 0 -0.632 l 0.371 -0.895 c 0.175 -0.421 0.659 -0.621 1.08 -0.447 c 0.124 0.052 0.209 -0.009 0.25 -0.049 c 0.041 -0.041 0.102 -0.127 0.05 -0.251 c -0.084 -0.204 -0.084 -0.429 0 -0.633 c 0.084 -0.204 0.243 -0.363 0.447 -0.447 l 0.895 -0.371 c 0.421 -0.174 0.905 0.026 1.08 0.447 c 0.051 0.123 0.155 0.142 0.212 0.142 c 0.057 0 0.161 -0.018 0.212 -0.142 c 0.084 -0.204 0.243 -0.363 0.447 -0.447 c 0.204 -0.085 0.428 -0.085 0.632 0 l 0.895 0.371 c 0.204 0.084 0.363 0.243 0.447 0.447 c 0.084 0.204 0.084 0.429 0 0.632 c -0.051 0.123 0.009 0.209 0.049 0.25 c 0.05 0.05 0.134 0.099 0.251 0.05 c 0.204 -0.084 0.428 -0.085 0.633 0 c 0.204 0.085 0.363 0.243 0.447 0.447 l 0.371 0.895 c 0.084 0.204 0.084 0.429 0 0.632 c -0.085 0.204 -0.244 0.363 -0.448 0.448 c -0.123 0.051 -0.141 0.155 -0.141 0.212 c 0 0.057 0.018 0.161 0.142 0.212 c 0.421 0.175 0.621 0.659 0.447 1.079 L 8.961 18.23 c -0.084 0.204 -0.243 0.363 -0.447 0.447 c -0.204 0.084 -0.429 0.084 -0.633 0 c -0.123 -0.051 -0.21 0.009 -0.25 0.05 c -0.041 0.041 -0.101 0.127 -0.05 0.251 c 0.084 0.204 0.084 0.428 0 0.632 c -0.085 0.204 -0.243 0.363 -0.447 0.447 l -0.895 0.371 C 6.138 20.469 6.032 20.49 5.923 20.49 z M 4.948 19.324 c 0.24 0 0.547 0.12 0.687 0.459 c 0.032 0.077 0.092 0.137 0.169 0.169 c 0.077 0.032 0.162 0.032 0.239 0 l 0.895 -0.371 c 0.077 -0.032 0.137 -0.092 0.169 -0.169 c 0.032 -0.077 0.032 -0.162 0 -0.238 c -0.14 -0.339 -0.009 -0.641 0.161 -0.811 c 0.169 -0.17 0.471 -0.302 0.81 -0.161 c 0.077 0.032 0.162 0.032 0.239 0 c 0.077 -0.032 0.137 -0.092 0.169 -0.169 l 0.371 -0.895 c 0.066 -0.159 -0.01 -0.342 -0.169 -0.408 c -0.339 -0.14 -0.459 -0.447 -0.459 -0.687 s 0.121 -0.547 0.459 -0.687 c 0.077 -0.032 0.137 -0.092 0.169 -0.169 c 0.032 -0.077 0.032 -0.162 0 -0.239 l -0.371 -0.894 c -0.032 -0.077 -0.092 -0.137 -0.169 -0.169 c -0.077 -0.032 -0.162 -0.032 -0.239 0 c -0.339 0.14 -0.641 0.009 -0.811 -0.162 c -0.17 -0.169 -0.302 -0.471 -0.161 -0.81 c 0.032 -0.077 0.032 -0.162 0 -0.239 c -0.032 -0.077 -0.092 -0.137 -0.169 -0.169 l -0.895 -0.371 c -0.077 -0.032 -0.162 -0.032 -0.239 0 c -0.077 0.032 -0.137 0.092 -0.169 0.169 c -0.14 0.339 -0.447 0.459 -0.687 0.459 s -0.547 -0.12 -0.687 -0.459 c -0.066 -0.159 -0.249 -0.235 -0.408 -0.169 l -0.895 0.371 c -0.077 0.032 -0.137 0.092 -0.169 0.169 c -0.032 0.077 -0.032 0.162 0 0.239 c 0.14 0.339 0.009 0.641 -0.162 0.811 c -0.169 0.17 -0.471 0.301 -0.81 0.161 c -0.159 -0.066 -0.342 0.01 -0.408 0.169 l -0.371 0.895 c -0.032 0.077 -0.032 0.162 0 0.238 c 0.032 0.078 0.092 0.137 0.169 0.169 c 0.339 0.141 0.46 0.448 0.459 0.688 c 0 0.24 -0.121 0.547 -0.459 0.687 l 0 0 c -0.077 0.032 -0.137 0.092 -0.168 0.169 c -0.032 0.077 -0.032 0.162 0 0.238 l 0.371 0.895 c 0.066 0.159 0.249 0.235 0.408 0.169 c 0.339 -0.141 0.641 -0.009 0.811 0.162 c 0.169 0.168 0.302 0.47 0.161 0.81 c -0.066 0.159 0.01 0.342 0.169 0.408 l 0.895 0.371 c 0.159 0.066 0.342 -0.01 0.408 -0.169 C 4.4 19.445 4.707 19.324 4.948 19.324 z M 1.109 16.493 h 0.003 H 1.109 z M 4.948 17.871 c -1.008 0 -1.829 -0.82 -1.829 -1.828 s 0.82 -1.829 1.829 -1.829 c 1.008 0 1.828 0.82 1.828 1.829 S 5.956 17.871 4.948 17.871 z M 4.948 14.729 c -0.725 0 -1.314 0.59 -1.314 1.314 s 0.59 1.314 1.314 1.314 s 1.314 -0.589 1.314 -1.314 S 5.672 14.729 4.948 14.729 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10;fill-rule: nonzero; opacity: 1;" transform=" matrix(3.89 0 0 3.89 -1.9444444444444287 -1.9444444444444287) " stroke-linecap="round" />
      <path d="M 20.164 20.49 c -0.108 0 -0.215 -0.021 -0.316 -0.063 c -0.204 -0.085 -0.363 -0.244 -0.447 -0.447 c -0.049 -0.117 -0.142 -0.142 -0.212 -0.142 s -0.164 0.025 -0.212 0.142 c -0.054 0.131 -0.205 0.193 -0.336 0.139 c -0.131 -0.054 -0.194 -0.205 -0.139 -0.336 c 0.14 -0.339 0.447 -0.459 0.687 -0.459 s 0.547 0.12 0.687 0.459 c 0.032 0.077 0.092 0.137 0.169 0.169 c 0.078 0.032 0.162 0.032 0.239 0 l 0.895 -0.371 c 0.077 -0.032 0.137 -0.092 0.169 -0.169 c 0.032 -0.077 0.032 -0.162 0 -0.238 c -0.141 -0.34 -0.009 -0.642 0.162 -0.811 c 0.168 -0.169 0.47 -0.301 0.81 -0.161 c 0.078 0.032 0.162 0.031 0.239 0 c 0.077 -0.032 0.137 -0.092 0.169 -0.169 l 0.371 -0.895 c 0.032 -0.077 0.032 -0.161 0 -0.239 c -0.032 -0.077 -0.092 -0.137 -0.169 -0.169 c -0.339 -0.14 -0.459 -0.447 -0.459 -0.687 s 0.12 -0.547 0.459 -0.687 c 0.077 -0.032 0.137 -0.092 0.169 -0.169 c 0.032 -0.077 0.032 -0.162 0 -0.239 l -0.371 -0.895 c -0.032 -0.077 -0.092 -0.137 -0.169 -0.169 c -0.077 -0.032 -0.162 -0.032 -0.238 0 c -0.339 0.14 -0.641 0.009 -0.811 -0.161 c -0.17 -0.169 -0.302 -0.471 -0.161 -0.811 c 0.032 -0.077 0.032 -0.162 0 -0.239 c -0.032 -0.077 -0.092 -0.137 -0.169 -0.169 l -0.895 -0.371 c -0.077 -0.032 -0.162 -0.032 -0.238 0 c -0.077 0.032 -0.137 0.092 -0.169 0.169 c -0.141 0.339 -0.447 0.46 -0.688 0.46 s -0.547 -0.12 -0.687 -0.459 c -0.066 -0.159 -0.249 -0.235 -0.408 -0.169 l -0.895 0.371 c -0.077 0.032 -0.137 0.092 -0.168 0.168 c -0.032 0.078 -0.032 0.162 0 0.24 c 0.054 0.131 -0.009 0.281 -0.14 0.336 c -0.13 0.054 -0.281 -0.008 -0.336 -0.14 c -0.084 -0.204 -0.084 -0.429 0.001 -0.632 c 0.084 -0.204 0.243 -0.363 0.447 -0.447 l 0.895 -0.371 c 0.421 -0.175 0.905 0.027 1.08 0.447 c 0.051 0.123 0.155 0.142 0.212 0.142 c 0.057 0 0.161 -0.018 0.212 -0.142 c 0.084 -0.204 0.243 -0.363 0.447 -0.447 c 0.204 -0.085 0.428 -0.085 0.632 0 l 0.895 0.371 c 0.204 0.084 0.363 0.243 0.447 0.447 c 0.085 0.204 0.085 0.429 0 0.633 c -0.051 0.124 0.009 0.209 0.049 0.25 c 0.05 0.05 0.133 0.099 0.251 0.05 c 0.204 -0.084 0.428 -0.084 0.633 0 c 0.204 0.085 0.363 0.243 0.447 0.447 l 0.371 0.895 c 0.085 0.204 0.085 0.429 0 0.633 s -0.244 0.363 -0.447 0.447 c -0.123 0.051 -0.142 0.155 -0.142 0.212 c 0 0.057 0.019 0.161 0.142 0.212 c 0.204 0.085 0.362 0.243 0.447 0.447 c 0.084 0.204 0.084 0.429 0 0.632 l -0.371 0.895 c -0.084 0.204 -0.243 0.363 -0.447 0.447 c -0.205 0.085 -0.429 0.084 -0.633 0 c -0.124 -0.051 -0.21 0.009 -0.25 0.049 c -0.041 0.041 -0.102 0.127 -0.05 0.251 c 0.084 0.203 0.084 0.428 0 0.632 c -0.085 0.204 -0.243 0.363 -0.447 0.447 l -0.895 0.371 C 20.379 20.469 20.272 20.49 20.164 20.49 z M 19.188 17.871 c -0.278 0 -0.546 -0.061 -0.795 -0.182 c -0.128 -0.062 -0.181 -0.216 -0.119 -0.343 c 0.062 -0.128 0.215 -0.181 0.343 -0.119 c 0.179 0.087 0.371 0.131 0.571 0.131 c 0.725 0 1.314 -0.589 1.314 -1.314 s -0.59 -1.314 -1.314 -1.314 c -0.308 0 -0.607 0.109 -0.843 0.307 c -0.109 0.091 -0.271 0.077 -0.362 -0.032 c -0.091 -0.109 -0.077 -0.271 0.032 -0.362 c 0.329 -0.275 0.745 -0.427 1.173 -0.427 c 1.008 0 1.829 0.82 1.829 1.829 S 20.197 17.871 19.188 17.871 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10;fill-rule: nonzero; opacity: 1;" transform=" matrix(3.89 0 0 3.89 -1.9444444444444287 -1.9444444444444287) " stroke-linecap="round" />
      <path d="M 66.063 82.056 H 23.937 c -0.552 0 -1 -0.447 -1 -1 c 0 -0.553 0.448 -1 1 -1 h 41.126 v -16.21 c 0 -5.725 -3.64 -10.822 -9.057 -12.683 c -2.564 -0.882 -4.288 -3.358 -4.288 -6.163 s 1.724 -5.282 4.288 -6.163 c 5.417 -1.861 9.057 -6.958 9.057 -12.684 V 9.944 H 24.937 v 16.209 c 0 5.726 3.639 10.823 9.056 12.684 c 2.565 0.881 4.288 3.358 4.288 6.163 c 0 2.036 -0.938 3.979 -2.509 5.2 c -0.435 0.339 -1.065 0.26 -1.403 -0.177 c -0.339 -0.437 -0.26 -1.064 0.176 -1.403 c 1.086 -0.844 1.735 -2.197 1.735 -3.62 c 0 -1.951 -1.181 -3.668 -2.937 -4.271 c -6.225 -2.139 -10.406 -7.996 -10.406 -14.575 V 8.944 c 0 -0.552 0.448 -1 1 -1 h 42.126 c 0.553 0 1 0.448 1 1 v 17.209 c 0 6.579 -4.182 12.436 -10.406 14.575 c -1.758 0.604 -2.938 2.32 -2.938 4.271 s 1.181 3.668 2.938 4.272 c 6.225 2.139 10.406 7.995 10.406 14.574 v 17.21 C 67.063 81.609 66.616 82.056 66.063 82.056 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10;fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
      <path d="M 67.994 89.999 H 22.006 c -0.552 0 -1 -0.447 -1 -1 v -7.943 c 0 -0.553 0.448 -1 1 -1 h 45.988 c 0.553 0 1 0.447 1 1 v 7.943 C 68.994 89.552 68.546 89.999 67.994 89.999 z M 23.006 87.999 h 43.988 v -5.943 H 23.006 V 87.999 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10;fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
      <path d="M 67.994 9.944 H 22.006 c -0.552 0 -1 -0.448 -1 -1 V 1.001 c 0 -0.552 0.448 -1 1 -1 h 45.988 c 0.553 0 1 0.448 1 1 v 7.944 C 68.994 9.497 68.546 9.944 67.994 9.944 z M 23.006 7.944 h 43.988 V 2.001 H 23.006 V 7.944 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10;fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
      <path d="M 55.311 82.056 H 34.689 c -0.552 0 -1 -0.447 -1 -1 v -1.757 c 0 -6.272 5.046 -13.848 11.311 -13.848 s 11.311 7.576 11.311 13.848 v 1.757 C 56.311 81.609 55.864 82.056 55.311 82.056 z M 35.689 80.056 h 18.623 v -0.757 c 0 -5.334 -4.297 -11.848 -9.311 -11.848 s -9.311 6.515 -9.311 11.848 V 80.056 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10;fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
      <path d="M 45 37.383 c -8.352 0 -14.653 -11.733 -16.661 -19.129 c -0.082 -0.301 -0.019 -0.622 0.17 -0.87 c 0.189 -0.248 0.483 -0.393 0.794 -0.393 h 31.394 c 0.312 0 0.605 0.145 0.795 0.393 c 0.188 0.248 0.252 0.569 0.17 0.87 C 59.652 25.65 53.351 37.383 45 37.383 z M 30.641 18.992 C 32.924 26.188 38.532 35.383 45 35.383 c 6.467 0 12.075 -9.195 14.359 -16.391 H 30.641 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10;fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
      </g>
    </svg>
    <h2>Recent Activities</h2>
  </div>
  {% for message in messages %}
    <div class="activities__box">
      <div class="activities__boxHeader roomListRoom__header">
        <a href="{% url 'user-profile' message.user.id %}"
           class="roomListRoom__author">
          <div class="avatar avatar--small">
            <img src="{{ message.user.avatar.url }}" />
          </div>
          <p>
            {{ message.user.username }}
            <span>{{ message.created | timesince }} ago</span>
          </p>
        </a>
        {% if request.user == message.user %}
          <div class="roomListRoom__actions">
            <a href="{% url 'delete-message' message.id %}">
              <svg version="1.1"
                   xmlns="http://www.w3.org/2000/svg"
                   width="32"
                   height="32"
                   viewBox="0 0 32 32">
                <title>remove</title>
                <path d="M27.314 6.019l-1.333-1.333-9.98 9.981-9.981-9.981-1.333 1.333 9.981 9.981-9.981 9.98 1.333 1.333 9.981-9.98 9.98 9.98 1.333-1.333-9.98-9.98 9.98-9.981z">
                </path>
              </svg>
            </a>
          </div>
        {% endif %}
      </div>
      <div class="activities__boxContent">
        <p>
          replied to post “<a href="{% url 'room' message.room.id %}">{{ message.room }}</a>”
        </p>
        <div class="activities__boxRoomContent">
          {{ message.body| truncatewords:20 }}
          {% if message.file %}
                      <div class="message__file">
                        {% with message.file.url|lower as file_url %}
                          {% if file_url|slice:'-4:' == ".png" or file_url|slice:'-4:' == ".jpg" or file_url|slice:'-5:' == ".jpeg" or file_url|slice:'-4:' == ".gif" or file_url|slice:'-4:' == ".svg"  %}
                            <img src="{{ message.file.url }}"
                                 alt="Uploaded Image"
                                 class="uploaded-image">
                          {% else %}
                            {% with file_url|slice:'-3:' as ext %}
                              {% with file_url|slice:'-4:' as ext4 %}
                                {% with file_url|slice:'-5:' as ext5 %}
                                  {% if ext == "pdf" %}
                                    <img src="{% static 'Images/icons/pdf_icon.png' %}" class="file-icon">
                                  {% elif ext == "txt" %}
                                    <img src="{% static 'Images/icons/txt_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "docx" %}
                                    <img src="{% static 'Images/icons/docx_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "xlsx" %}
                                    <img src="{% static 'Images/icons/xlsx_icon.png' %}" class="file-icon">
                                  {% elif ext == "py" %}
                                    <img src="{% static 'Images/icons/py_icon.png' %}" class="file-icon">
                                  {% elif ext == "c" %}
                                    <img src="{% static 'Images/icons/c_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "cpp" %}
                                    <img src="{% static 'Images/icons/cpp_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "html" %}
                                    <img src="{% static 'Images/icons/html_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "css" %}
                                    <img src="{% static 'Images/icons/css_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "zip" %}
                                    <img src="{% static 'Images/icons/zip_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "mp3" %}
                                    <img src="{% static 'Images/icons/mp3_icon.png' %}" class="file-icon">
                                  {% elif ext4 == "mp4" %}
                                    <img src="{% static 'Images/icons/mp4_icon.png' %}" class="file-icon">
                                  {% else %}
                                    <img src="{% static 'Images/icons/default_file_icon.png' %}"
                                         class="file-icon">
                                  {% endif %}
                                {% endwith %}
                              {% endwith %}
                            {% endwith %}
                            <p class="file-link">
                              <a href="{{ message.file.url }}" download>{{ message.file.name|cut:"messages/" }}</a>
                            </p>
                          {% endif %}
                        {% endwith %}
                      </div>
                    {% endif %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>
